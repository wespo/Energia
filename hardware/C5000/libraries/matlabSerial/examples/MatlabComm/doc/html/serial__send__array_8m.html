<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>MatlabComm: serial_send_array.m File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MatlabComm
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">DSP Shield serial communication to/from Matlab</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">serial_send_array.m File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a17eea02427bce48511b975cbbf786c37"><td class="memItemLeft" align="right" valign="top">Sends a vector of binary <a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> <br class="typebreak" />
to the DSP Shield This process <br class="typebreak" />
works as then sends <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> the <br class="typebreak" />
vector size to acknowledge <br class="typebreak" />
this <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> receives the size <br class="typebreak" />
<a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> from the DSP Shield and <br class="typebreak" />
if it matches the size that it <br class="typebreak" />
then <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> begins sending <br class="typebreak" />
<a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> It does this by sending <br class="typebreak" />
blocks of size&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a17eea02427bce48511b975cbbf786c37">buffsize</a> (which should be <a class="el" href="serial__connect_8m.html#a154e05a84a6e85b6df8a0edf7a2c36c4">set</a> to%the buffer size in the DSP Shield) and waiting for an acknowledge%after each block to know that the buffers have cleared again.%The DSP Shield receives blocks of size buffsize and stores this in the%buffer allocated.It then sends <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> a character letting <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> know%that it is ready for new data.%This continues until the end of the <a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> is reached <a class="el" href="serial__connect_8m.html#aa6146ede149bbe232247940b6d3c0a7b">function</a> <a class="el" href="serial__cmd_8m.html#a9bd33870d6927121443a6bc3c428d89a">serial_send_array</a>(<a class="el" href="serial__connect_8m.html#a6b05d210dca1c8ad5bc2d1ab35337ab3">s</a></td></tr>
<tr class="separator:a17eea02427bce48511b975cbbf786c37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1b64f4157ee4d74ac757b5f8ae13523"><td class="memItemLeft" align="right" valign="top">elseif <a class="el" href="serial__send__array_8m.html#a8b840739d323b6d3e5eccbbef6043558">nargin</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#ae1b64f4157ee4d74ac757b5f8ae13523">error</a> (['Error:Too many arugments in '... 'serial_out(<a class="el" href="serial__connect_8m.html#a6b05d210dca1c8ad5bc2d1ab35337ab3">s</a>, <a class="el" href="serial__send__array_8m.html#aa0fb5d748029762d752afc732ee407f8">x</a>, <a class="el" href="serial__send__array_8m.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, <a class="el" href="serial__send__array_8m.html#a612c76882d0e863b8ce0638f79a4ca69">maxlen</a>)'])</td></tr>
<tr class="separator:ae1b64f4157ee4d74ac757b5f8ae13523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f07e5081d00644660c74b23b4cee1f7"><td class="memItemLeft" align="right" valign="top">end Extract the <a class="el" href="serial__send__array_8m.html#a9d58a16f8e6c9d6d53ba460ba69b9d9f">bytes</a> per&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a0f07e5081d00644660c74b23b4cee1f7">value</a> (<a class="el" href="serial__send__array_8m.html#adb9b8ba15eb1cc458d11a7f217f3a33c">bpv</a>) and <a class="el" href="serial__send__array_8m.html#a9a88eaa847575b670854d76cb0312297">maxsize</a> for each <a class="el" href="serial__send__array_8m.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> switch <a class="el" href="serial__send__array_8m.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> <a class="el" href="serial__send__array_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a></td></tr>
<tr class="separator:a0f07e5081d00644660c74b23b4cee1f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10edc2f3ef9d5d6ab98e346cf8cd0c15"><td class="memItemLeft" align="right" valign="top">Check that our message is not <br class="typebreak" />
too long if <a class="el" href="serial__send__array_8m.html#a12a4a156ad2e5512b88998884e138328">num_bytes</a> <a class="el" href="serial__send__array_8m.html#a9a88eaa847575b670854d76cb0312297">maxsize</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a10edc2f3ef9d5d6ab98e346cf8cd0c15">error</a> ('Error:Message is too long')</td></tr>
<tr class="separator:a10edc2f3ef9d5d6ab98e346cf8cd0c15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c065104ff9fa974e7d5a2cc247257cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="serial__connect_8m.html#a6b05d210dca1c8ad5bc2d1ab35337ab3">s</a>, <a class="el" href="serial__send__array_8m.html#a12a4a156ad2e5512b88998884e138328">num_bytes</a>, 'uint16'&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a9c065104ff9fa974e7d5a2cc247257cc">fwrite</a> ()</td></tr>
<tr class="separator:a9c065104ff9fa974e7d5a2cc247257cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20519d17a67d27750a777bc02f51e313"><td class="memItemLeft" align="right" valign="top">Waits for the acknowledge <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a20519d17a67d27750a777bc02f51e313">fread</a> (<a class="el" href="serial__connect_8m.html#a6b05d210dca1c8ad5bc2d1ab35337ab3">s</a>, 1)</td></tr>
<tr class="separator:a20519d17a67d27750a777bc02f51e313"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24605e3a77cdf37d723563fcf1eb0f19"><td class="memItemLeft" align="right" valign="top">end Make sure we close the <br class="typebreak" />
stream on <a class="el" href="serial__send__array_8m.html#a9ffdb760af772574101602ef4c50974e">error</a> catch err&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a24605e3a77cdf37d723563fcf1eb0f19">fclose</a> (<a class="el" href="serial__connect_8m.html#a6b05d210dca1c8ad5bc2d1ab35337ab3">s</a>)</td></tr>
<tr class="separator:a24605e3a77cdf37d723563fcf1eb0f19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ffdb760af772574101602ef4c50974e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a9ffdb760af772574101602ef4c50974e">error</a> (err.message)</td></tr>
<tr class="separator:a9ffdb760af772574101602ef4c50974e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a35c85db34e09951ec03d4644ae1d5b4f"><td class="memItemLeft" align="right" valign="top">Sends a vector of binary <a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> <br class="typebreak" />
to the DSP Shield This process <br class="typebreak" />
works as&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a35c85db34e09951ec03d4644ae1d5b4f">follows</a></td></tr>
<tr class="separator:a35c85db34e09951ec03d4644ae1d5b4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b19fc531ac068382159f6018fdccf68"><td class="memItemLeft" align="right" valign="top">Sends a vector of binary <a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> <br class="typebreak" />
to the DSP Shield This process <br class="typebreak" />
works as then sends <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> the <br class="typebreak" />
vector size to acknowledge <br class="typebreak" />
this <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> receives the size <br class="typebreak" />
<a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> from the DSP Shield and <br class="typebreak" />
if it matches the size that it&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a5b19fc531ac068382159f6018fdccf68">sent</a></td></tr>
<tr class="separator:a5b19fc531ac068382159f6018fdccf68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0fb5d748029762d752afc732ee407f8"><td class="memItemLeft" align="right" valign="top">Sends a vector of binary <a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> <br class="typebreak" />
to the DSP Shield This process <br class="typebreak" />
works as then sends <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> the <br class="typebreak" />
vector size to acknowledge <br class="typebreak" />
this <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> receives the size <br class="typebreak" />
<a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> from the DSP Shield and <br class="typebreak" />
if it matches the size that it <br class="typebreak" />
then <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> begins sending <br class="typebreak" />
<a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> It does this by sending <br class="typebreak" />
blocks of size&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#aa0fb5d748029762d752afc732ee407f8">x</a></td></tr>
<tr class="separator:aa0fb5d748029762d752afc732ee407f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1ac32f1253cf18939222b69aa4cdc01"><td class="memItemLeft" align="right" valign="top">Sends a vector of binary <a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> <br class="typebreak" />
to the DSP Shield This process <br class="typebreak" />
works as then sends <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> the <br class="typebreak" />
vector size to acknowledge <br class="typebreak" />
this <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> receives the size <br class="typebreak" />
<a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> from the DSP Shield and <br class="typebreak" />
if it matches the size that it <br class="typebreak" />
then <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> begins sending <br class="typebreak" />
<a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> It does this by sending <br class="typebreak" />
blocks of size varargin Define <br class="typebreak" />
constants&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#aa1ac32f1253cf18939222b69aa4cdc01">buffsize</a> = 16</td></tr>
<tr class="separator:aa1ac32f1253cf18939222b69aa4cdc01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a222f9075a8e1c98b805b0b6ecd0ac899"><td class="memItemLeft" align="right" valign="top">Number of values to send&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a222f9075a8e1c98b805b0b6ecd0ac899">num_vals</a> = length(<a class="el" href="serial__send__array_8m.html#aa0fb5d748029762d752afc732ee407f8">x</a>)</td></tr>
<tr class="separator:a222f9075a8e1c98b805b0b6ecd0ac899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85c47c87d9dfb4ed1b99fad64580cbe7"><td class="memItemLeft" align="right" valign="top">Indicate if we have a <a class="el" href="serial__send__array_8m.html#a612c76882d0e863b8ce0638f79a4ca69">maxlen</a> <br class="typebreak" />
<a class="el" href="serial__send__array_8m.html#aa2d2dbdb2bf7aec8be1ed556245edb1a">argument</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a85c47c87d9dfb4ed1b99fad64580cbe7">lenset</a> = 0</td></tr>
<tr class="separator:a85c47c87d9dfb4ed1b99fad64580cbe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b840739d323b6d3e5eccbbef6043558"><td class="memItemLeft" align="right" valign="top">Pull out the <a class="el" href="serial__send__array_8m.html#aa2d2dbdb2bf7aec8be1ed556245edb1a">argument</a> <a class="el" href="serial__send__array_8m.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> if&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a8b840739d323b6d3e5eccbbef6043558">nargin</a></td></tr>
<tr class="separator:a8b840739d323b6d3e5eccbbef6043558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aead736a07eaf25623ad7bfa1f0ee2d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> = varargin{1}</td></tr>
<tr class="separator:a7aead736a07eaf25623ad7bfa1f0ee2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a612c76882d0e863b8ce0638f79a4ca69"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a612c76882d0e863b8ce0638f79a4ca69">maxlen</a> = varargin{2}</td></tr>
<tr class="separator:a612c76882d0e863b8ce0638f79a4ca69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb9b8ba15eb1cc458d11a7f217f3a33c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#adb9b8ba15eb1cc458d11a7f217f3a33c">bpv</a> = 1</td></tr>
<tr class="separator:adb9b8ba15eb1cc458d11a7f217f3a33c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a88eaa847575b670854d76cb0312297"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a9a88eaa847575b670854d76cb0312297">maxsize</a> = 2^16-1</td></tr>
<tr class="separator:a9a88eaa847575b670854d76cb0312297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97ee6abe7d21ae63d3399f62a2abd639"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a></td></tr>
<tr class="separator:a97ee6abe7d21ae63d3399f62a2abd639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2d2dbdb2bf7aec8be1ed556245edb1a"><td class="memItemLeft" align="right" valign="top">end If we have a max length&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#aa2d2dbdb2bf7aec8be1ed556245edb1a">argument</a></td></tr>
<tr class="separator:aa2d2dbdb2bf7aec8be1ed556245edb1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12a4a156ad2e5512b88998884e138328"><td class="memItemLeft" align="right" valign="top">end&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a12a4a156ad2e5512b88998884e138328">num_bytes</a> = <a class="el" href="serial__send__array_8m.html#a222f9075a8e1c98b805b0b6ecd0ac899">num_vals</a>*<a class="el" href="serial__send__array_8m.html#adb9b8ba15eb1cc458d11a7f217f3a33c">bpv</a></td></tr>
<tr class="separator:a12a4a156ad2e5512b88998884e138328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d58a16f8e6c9d6d53ba460ba69b9d9f"><td class="memItemLeft" align="right" valign="top">end Convert our vector size to <br class="typebreak" />
two bytes which we send to the <br class="typebreak" />
DSP Shield&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a9d58a16f8e6c9d6d53ba460ba69b9d9f">bytes</a> = flipud(bin2dec(reshape(dec2bin(<a class="el" href="serial__send__array_8m.html#a12a4a156ad2e5512b88998884e138328">num_bytes</a>, 8*<a class="el" href="serial__connect_8m.html#a038fe8bd95106c91dbf5b589ab5dcf8f">hsize</a>), 8, [])'))</td></tr>
<tr class="separator:a9d58a16f8e6c9d6d53ba460ba69b9d9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf80f3d11d899066d76a9981c505710c"><td class="memItemLeft" align="right" valign="top">Receive the size of the vector <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#aaf80f3d11d899066d76a9981c505710c">vals_back</a> = <a class="el" href="serial__send__array_8m.html#a20519d17a67d27750a777bc02f51e313">fread</a>(<a class="el" href="serial__connect_8m.html#a6b05d210dca1c8ad5bc2d1ab35337ab3">s</a>, 1, 'uint16')</td></tr>
<tr class="separator:aaf80f3d11d899066d76a9981c505710c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a299400ce276f4905e8c8a0b88fd18250"><td class="memItemLeft" align="right" valign="top">end Send in chunks of no more <br class="typebreak" />
than <a class="el" href="serial__send__array_8m.html#a17eea02427bce48511b975cbbf786c37">buffsize</a> until we reach <br class="typebreak" />
the end for&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial__send__array_8m.html#a299400ce276f4905e8c8a0b88fd18250">i</a></td></tr>
<tr class="separator:a299400ce276f4905e8c8a0b88fd18250"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a17eea02427bce48511b975cbbf786c37"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Sends a vector of binary <a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> to the DSP Shield This process works as then sends <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> the vector size to acknowledge this <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> receives the size <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> from the DSP Shield and if it matches the size that it then <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> begins sending <a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> It does this by sending blocks of size buffsize </td>
          <td>(</td>
          <td class="paramtype">which should be <a class="el" href="serial__connect_8m.html#a154e05a84a6e85b6df8a0edf7a2c36c4">set</a> to%the buffer size in the DSP&#160;</td>
          <td class="paramname"><em>Shield</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">new</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae1b64f4157ee4d74ac757b5f8ae13523"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">elseif <a class="el" href="serial__send__array_8m.html#a8b840739d323b6d3e5eccbbef6043558">nargin</a> error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a10edc2f3ef9d5d6ab98e346cf8cd0c15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Check that our message is not too long if <a class="el" href="serial__send__array_8m.html#a12a4a156ad2e5512b88998884e138328">num_bytes</a> <a class="el" href="serial__send__array_8m.html#a9a88eaa847575b670854d76cb0312297">maxsize</a> error </td>
          <td>(</td>
          <td class="paramtype">'Error:Message is too long'&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9ffdb760af772574101602ef4c50974e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">error </td>
          <td>(</td>
          <td class="paramtype">err.&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a24605e3a77cdf37d723563fcf1eb0f19"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end Make sure we close the stream on <a class="el" href="serial__send__array_8m.html#a9ffdb760af772574101602ef4c50974e">error</a> catch err fclose </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="serial__connect_8m.html#a6b05d210dca1c8ad5bc2d1ab35337ab3">s</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a20519d17a67d27750a777bc02f51e313"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Waits for the acknowledge <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> fread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="serial__connect_8m.html#a6b05d210dca1c8ad5bc2d1ab35337ab3">s</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9c065104ff9fa974e7d5a2cc247257cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="serial__connect_8m.html#a6b05d210dca1c8ad5bc2d1ab35337ab3">s</a>, <a class="el" href="serial__send__array_8m.html#a12a4a156ad2e5512b88998884e138328">num_bytes</a>, 'uint16' fwrite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0f07e5081d00644660c74b23b4cee1f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end Extract the <a class="el" href="serial__send__array_8m.html#a9d58a16f8e6c9d6d53ba460ba69b9d9f">bytes</a> per value </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="serial__send__array_8m.html#adb9b8ba15eb1cc458d11a7f217f3a33c">bpv</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="aa2d2dbdb2bf7aec8be1ed556245edb1a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end If we have a max length argument</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="adb9b8ba15eb1cc458d11a7f217f3a33c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bpv = 1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa1ac32f1253cf18939222b69aa4cdc01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Sends a vector of binary <a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> to the DSP Shield This process works as then sends <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> the vector size to acknowledge this <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> receives the size <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> from the DSP Shield and if it matches the size that it then <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> begins sending <a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> It does this by sending blocks of size varargin Define constants buffsize = 16</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9d58a16f8e6c9d6d53ba460ba69b9d9f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end Convert our vector size to two bytes which we send to the DSP Shield bytes = flipud(bin2dec(reshape(dec2bin(<a class="el" href="serial__send__array_8m.html#a12a4a156ad2e5512b88998884e138328">num_bytes</a>, 8*<a class="el" href="serial__connect_8m.html#a038fe8bd95106c91dbf5b589ab5dcf8f">hsize</a>), 8, [])'))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a97ee6abe7d21ae63d3399f62a2abd639"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">case</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{<span class="stringliteral">&#39;int16&#39;</span>, <span class="stringliteral">&#39;uint16&#39;</span>}</div>
<div class="line">            <a class="code" href="serial__send__array_8m.html#a9a88eaa847575b670854d76cb0312297">maxsize</a> = 2^15-1</div>
<div class="ttc" id="serial__send__array_8m_html_a9a88eaa847575b670854d76cb0312297"><div class="ttname"><a href="serial__send__array_8m.html#a9a88eaa847575b670854d76cb0312297">maxsize</a></div><div class="ttdeci">maxsize</div><div class="ttdef"><b>Definition:</b> serial_send_array.m:44</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a35c85db34e09951ec03d4644ae1d5b4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Sends a vector of binary <a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> to the DSP Shield This process works as follows</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a299400ce276f4905e8c8a0b88fd18250"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end Send in chunks of no more than <a class="el" href="serial__send__array_8m.html#a17eea02427bce48511b975cbbf786c37">buffsize</a> until we reach the end for i</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= 1:<a class="code" href="serial__send__array_8m.html#aa1ac32f1253cf18939222b69aa4cdc01">buffsize</a>/<a class="code" href="serial__send__array_8m.html#adb9b8ba15eb1cc458d11a7f217f3a33c">bpv</a>:<a class="code" href="serial__send__array_8m.html#a222f9075a8e1c98b805b0b6ecd0ac899">num_vals</a></div>
<div class="line">            <a class="code" href="serial__send__array_8m.html#a9c065104ff9fa974e7d5a2cc247257cc">fwrite</a>(<a class="code" href="serial__connect_8m.html#a6b05d210dca1c8ad5bc2d1ab35337ab3">s</a>, <a class="code" href="serial__send__array_8m.html#aa0fb5d748029762d752afc732ee407f8">x</a>(<a class="code" href="serial__send__array_8m.html#a299400ce276f4905e8c8a0b88fd18250">i</a>:min(<a class="code" href="serial__send__array_8m.html#a299400ce276f4905e8c8a0b88fd18250">i</a>+<a class="code" href="serial__send__array_8m.html#aa1ac32f1253cf18939222b69aa4cdc01">buffsize</a>/<a class="code" href="serial__send__array_8m.html#adb9b8ba15eb1cc458d11a7f217f3a33c">bpv</a>-1, <a class="code" href="serial__send__array_8m.html#a222f9075a8e1c98b805b0b6ecd0ac899">num_vals</a>)), <a class="code" href="serial__send__array_8m.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>)</div>
<div class="ttc" id="serial__send__array_8m_html_a222f9075a8e1c98b805b0b6ecd0ac899"><div class="ttname"><a href="serial__send__array_8m.html#a222f9075a8e1c98b805b0b6ecd0ac899">num_vals</a></div><div class="ttdeci">Number of values to send num_vals</div><div class="ttdef"><b>Definition:</b> serial_send_array.m:21</div></div>
<div class="ttc" id="serial__connect_8m_html_a6b05d210dca1c8ad5bc2d1ab35337ab3"><div class="ttname"><a href="serial__connect_8m.html#a6b05d210dca1c8ad5bc2d1ab35337ab3">s</a></div><div class="ttdeci">Open a serial port at desired baud rate s</div><div class="ttdef"><b>Definition:</b> serial_connect.m:22</div></div>
<div class="ttc" id="serial__send__array_8m_html_a7aead736a07eaf25623ad7bfa1f0ee2d"><div class="ttname"><a href="serial__send__array_8m.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> serial_send_array.m:30</div></div>
<div class="ttc" id="serial__send__array_8m_html_adb9b8ba15eb1cc458d11a7f217f3a33c"><div class="ttname"><a href="serial__send__array_8m.html#adb9b8ba15eb1cc458d11a7f217f3a33c">bpv</a></div><div class="ttdeci">bpv</div><div class="ttdef"><b>Definition:</b> serial_send_array.m:43</div></div>
<div class="ttc" id="serial__send__array_8m_html_aa1ac32f1253cf18939222b69aa4cdc01"><div class="ttname"><a href="serial__send__array_8m.html#aa1ac32f1253cf18939222b69aa4cdc01">buffsize</a></div><div class="ttdeci">Sends a vector of binary data to the DSP Shield This process works as then sends back the vector size to acknowledge this Matlab receives the size back from the DSP Shield and if it matches the size that it then Matlab begins sending data It does this by sending blocks of size varargin Define constants buffsize</div><div class="ttdef"><b>Definition:</b> serial_send_array.m:18</div></div>
<div class="ttc" id="serial__send__array_8m_html_a299400ce276f4905e8c8a0b88fd18250"><div class="ttname"><a href="serial__send__array_8m.html#a299400ce276f4905e8c8a0b88fd18250">i</a></div><div class="ttdeci">end Send in chunks of no more than buffsize until we reach the end for i</div><div class="ttdef"><b>Definition:</b> serial_send_array.m:83</div></div>
<div class="ttc" id="serial__send__array_8m_html_a9c065104ff9fa974e7d5a2cc247257cc"><div class="ttname"><a href="serial__send__array_8m.html#a9c065104ff9fa974e7d5a2cc247257cc">fwrite</a></div><div class="ttdeci">s, num_bytes, 'uint16' fwrite()</div></div>
<div class="ttc" id="serial__send__array_8m_html_aa0fb5d748029762d752afc732ee407f8"><div class="ttname"><a href="serial__send__array_8m.html#aa0fb5d748029762d752afc732ee407f8">x</a></div><div class="ttdeci">Sends a vector of binary data to the DSP Shield This process works as then sends back the vector size to acknowledge this Matlab receives the size back from the DSP Shield and if it matches the size that it then Matlab begins sending data It does this by sending blocks of size x</div><div class="ttdef"><b>Definition:</b> serial_send_array.m:16</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a85c47c87d9dfb4ed1b99fad64580cbe7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lenset = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a612c76882d0e863b8ce0638f79a4ca69"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">maxlen = varargin{2}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9a88eaa847575b670854d76cb0312297"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end If we have a max length overwrite the maxsize if <a class="el" href="serial__send__array_8m.html#a85c47c87d9dfb4ed1b99fad64580cbe7">lenset</a> maxsize = 2^16-1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8b840739d323b6d3e5eccbbef6043558"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">elseif nargin</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">== 2</div>
<div class="line">        <a class="code" href="serial__send__array_8m.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> = <span class="stringliteral">&#39;int8&#39;</span></div>
<div class="ttc" id="serial__send__array_8m_html_a7aead736a07eaf25623ad7bfa1f0ee2d"><div class="ttname"><a href="serial__send__array_8m.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> serial_send_array.m:30</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a12a4a156ad2e5512b88998884e138328"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end num_bytes = <a class="el" href="serial__send__array_8m.html#a222f9075a8e1c98b805b0b6ecd0ac899">num_vals</a>*<a class="el" href="serial__send__array_8m.html#adb9b8ba15eb1cc458d11a7f217f3a33c">bpv</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a222f9075a8e1c98b805b0b6ecd0ac899"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Number of values to send num_vals = length(<a class="el" href="serial__send__array_8m.html#aa0fb5d748029762d752afc732ee407f8">x</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5b19fc531ac068382159f6018fdccf68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Sends a vector of binary <a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> to the DSP Shield This process works as then sends <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> the vector size to acknowledge this <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> receives the size <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> from the DSP Shield and if it matches the size that it sent</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7aead736a07eaf25623ad7bfa1f0ee2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">type = varargin{1}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aaf80f3d11d899066d76a9981c505710c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Check that we have the correct size acknowledge if vals_back = <a class="el" href="serial__send__array_8m.html#a20519d17a67d27750a777bc02f51e313">fread</a>(<a class="el" href="serial__connect_8m.html#a6b05d210dca1c8ad5bc2d1ab35337ab3">s</a>, 1, 'uint16')</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa0fb5d748029762d752afc732ee407f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Sends a vector of binary <a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> to the DSP Shield This process works as then sends <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> the vector size to acknowledge this <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> receives the size <a class="el" href="serial__connect_8m.html#afbd4ed6ccfcb4b098f60622d6d13c437">back</a> from the DSP Shield and if it matches the size that it then <a class="el" href="serial__connect_8m.html#a8af7ebc4688473aa23da41fe632e7068">Matlab</a> begins sending <a class="el" href="serial__cmd_8m.html#a12c4aeb0840b20cc7e7819ecd3f55a05">data</a> It does this by sending blocks of size x</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 24 2014 13:09:58 for MatlabComm by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
